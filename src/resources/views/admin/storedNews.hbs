<div class="container mt-4">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Danh sách bài viết (Admin)</h2>
    <a href="/admin/trash/news" class="btn btn-secondary">Thùng rác ({{deletedCount}})</a>
  </div>

  {{#if newdb.length}}
  <table class="table table-striped table-hover">
    <thead class="table-dark">
      <tr>
        <th>Tên bài viết</th>
        <th>Tác giả</th>
        <th>Thời gian tạo</th>
        <th>Thời gian cập nhật</th>
        <th class="text-center">Hành động</th>
      </tr>
    </thead>

    <tbody>
      {{#each newdb}}
      <tr>
        <td>{{this.name}}</td>
        <td>{{this.author}}</td>
        <td>{{this.createdAt}}</td>
        <td>{{this.updatedAt}}</td>

        <td class="text-center">

          <!-- Edit -->
          <a href="/admin/posts/edit/{{this._id}}" class="btn btn-sm btn-warning admin-2 me-2">Sửa</a>

          <!-- Clone -->
          <button type="button"
                  class="btn btn-sm btn-info admin-2 me-2"
                  data-bs-toggle="modal"
                  data-bs-target="#cloneModal-{{this._id}}">
            Clone
          </button>

          <!-- Delete -->
          <button type="button"
                  class="btn btn-sm btn-danger"
                  data-bs-toggle="modal"
                  data-bs-target="#deleteModal-{{this._id}}">
            Xóa
          </button>


          <!-- ========== CLONE MODAL ========== -->
          <div class="modal fade" id="cloneModal-{{this._id}}" tabindex="-1" aria-labelledby="cloneModalLabel-{{this._id}}" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">

                <div class="modal-header">
                  <h5 class="modal-title" id="cloneModalLabel-{{this._id}}">Xác nhận Clone</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body">
                  Bạn có chắc muốn clone bài viết <strong>{{this.name}}</strong>?
                </div>

                <div class="modal-footer d-flex justify-content-between">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>

                  <form action="/admin/posts/clone/{{this._id}}" method="POST" style="display:inline-block;">
                    <button type="submit" class="btn btn-info">Clone</button>
                  </form>
                </div>

              </div>
            </div>
          </div>


          <!-- ========== DELETE MODAL ========== -->
          <div class="modal fade" id="deleteModal-{{this._id}}" tabindex="-1" aria-labelledby="deleteModalLabel-{{this._id}}" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">

                <div class="modal-header">
                  <h5 class="modal-title" id="deleteModalLabel-{{this._id}}">Xác nhận xóa</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body">
                  Bạn có chắc muốn xóa bài viết <strong>{{this.name}}</strong>?
                </div>

                <div class="modal-footer d-flex justify-content-between">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>

                  <form action="/admin/{{this._id}}?_method=DELETE" method="POST" style="display:inline-block;">
                    <button type="submit" class="btn btn-danger">Xóa</button>
                  </form>
                </div>

              </div>
            </div>
          </div>

        </td>
      </tr>
      {{/each}}
    </tbody>

  </table>

  {{else}}

  <div class="alert alert-info text-center">
    <p>Hiện tại chưa có bài báo nào.</p>
    <a href="/admin/posts/add-new" class="btn btn-primary">Tạo bài viết mới</a>
  </div>

  {{/if}}
</div>
